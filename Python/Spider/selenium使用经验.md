# selenium使用经验

## 1、等待

[参考文章](https://www.cnblogs.com/haifeima/p/10173877.html#_label0)

每次页面刷新，或者请求的时候需要sleep一下，等待网页反应过来，否则的话，页面源码还是之前的。

这个等待<font size=5>sleep(sec)</font>在selenium的使用中是非常重要的。

### 1、隐式等待implicitly_wait

implicitly_wait(60) ： 隐式等待60s，这个method说是，刷新页面的时候用，其实，感觉没什么用。每次都没用，还是需要sleep这个东西

### 2、显示等待WebDirverWait

- driver：浏览器驱动
- 20：最长等待时间
- 0.5：查找间隔
- until：直到。。。
- EC.presence_of_element_located(xxx)：直到“xxx”出现才会返回。

这个显示等待，一般用在定位一个元素的时候，才用得到。

```python
WebDriverWait(driver, 20, 0.5).until(EC.presence_of_element_located(locator))
```

### 3、强制等待sleep

这个就没什么好说的了，虽然官方不推荐但是我感觉这个是最好用的。

## 2、点击click

### 1、寻找可以点击的标签

找到按钮，点击操作，这个按钮标签下面可能还有很多小标签。

这个要不断尝试寻找到那个按钮，同时要注意报错信息：这个报错信息一般会指出什么可以点击。

`报错信息：`一般在中间，就是看不懂的报错最上面的。

```
普通的报错信息
。。。。。
。。。。。
。。。。。
关键报错信息：。。。。。。。。。。
[……………………]
[……………………]
……
……
……
……
[……………………]
```

### 2、点击等待页面刷新

点击按钮之后，一定一定要等待页面刷新反应过来之后，再去获取页面源码，然后，这个等待直接用`sleep`方法就行了，<font color=red size=5>记住一定一定要等待</font>。

这个等待时间，可以先设置的短一点，如果不行的话，就把时间设置的长一点。

## 3、获取源码page_source

在获取页面源码的时候，一定要等待页面刷新完成！！！可以用sleep方法。

### 1、出现重复数据

<font size=5 color=red>未等到页面反应过来就再次获取页面源码是导致出现重复数据的最常见原因。</font>